# [supervisord]
# nodaemon=true
# logfile=/dev/stdout
# logfile_maxbytes=0
# pidfile=/tmp/supervisord.pid

# [program:api]
# command=uv run --no-sync uvicorn api.main:app --host 0.0.0.0 --port %(ENV_PORT)s
# autostart=true
# autorestart=true
# stdout_logfile=/dev/stdout
# stderr_logfile=/dev/stderr

# [program:worker]
# command=uv run --no-sync surreal-commands-worker --import-modules commands
# stdout_logfile=/dev/stdout
# stdout_logfile_maxbytes=0
# stderr_logfile=/dev/stderr
# stderr_logfile_maxbytes=0
# autorestart=true
# priority=20
# autostart=true
# startsecs=3

# [program:auth-api]
# command=node src/server.js
# directory=/app/auth-api
# stdout_logfile=/dev/stdout
# stdout_logfile_maxbytes=0
# stderr_logfile=/dev/stderr
# stderr_logfile_maxbytes=0
# autorestart=true
# priority=30
# autostart=true
# startsecs=3

[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
pidfile=/tmp/supervisord.pid

[program:api]
command=uv run --no-sync uvicorn api.main:app --host 0.0.0.0 --port %(ENV_PORT)s
priority=10
autostart=true
autorestart=true
startsecs=3
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

[program:worker]
command=uv run --no-sync surreal-commands-worker --import-modules commands
priority=20
autostart=true
autorestart=true
startsecs=3
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

[program:auth-api]
command=node src/server.js
directory=/app/auth-api
priority=30
autostart=true
autorestart=true
startsecs=3
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr